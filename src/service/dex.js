const a0_0x17643d=a0_0x4732;function a0_0x4732(_0x2eb784,_0xdeb9f2){const _0x4056df=a0_0x4056();return a0_0x4732=function(_0x4732a1,_0x195883){_0x4732a1=_0x4732a1-0x193;let _0xc619dd=_0x4056df[_0x4732a1];return _0xc619dd;},a0_0x4732(_0x2eb784,_0xdeb9f2);}(function(_0x4a45c9,_0x1f3a93){const _0x3713d0=a0_0x4732,_0x2e6500=_0x4a45c9();while(!![]){try{const _0x40a551=parseInt(_0x3713d0(0x19b))/0x1*(-parseInt(_0x3713d0(0x1be))/0x2)+parseInt(_0x3713d0(0x19c))/0x3*(-parseInt(_0x3713d0(0x1cb))/0x4)+-parseInt(_0x3713d0(0x19f))/0x5+parseInt(_0x3713d0(0x19e))/0x6+-parseInt(_0x3713d0(0x1b2))/0x7*(parseInt(_0x3713d0(0x1bf))/0x8)+parseInt(_0x3713d0(0x1af))/0x9*(parseInt(_0x3713d0(0x1a3))/0xa)+parseInt(_0x3713d0(0x1b7))/0xb*(parseInt(_0x3713d0(0x1b9))/0xc);if(_0x40a551===_0x1f3a93)break;else _0x2e6500['push'](_0x2e6500['shift']());}catch(_0x19e453){_0x2e6500['push'](_0x2e6500['shift']());}}}(a0_0x4056,0x4ccf8));const {ethers}=require('ethers'),{amount}=require(a0_0x17643d(0x194)),citeaRouterABI=require('../utils/abi/citeaRouterABI'),citeaLpABI=require(a0_0x17643d(0x1ba)),wsfiABI=require(a0_0x17643d(0x1b1)),usdcABI=require('../utils/abi/usdcABI'),sDaoLockingStakingABI=require(a0_0x17643d(0x1ca)),provider=new ethers['JsonRpcProvider']('https://rpc-testnet.singularityfinance.ai'),wsfiContractAddress=a0_0x17643d(0x1a1),usdcContractAddress=a0_0x17643d(0x1c7),citeaContractAddress=a0_0x17643d(0x1cf),citeaLpContractAddress=a0_0x17643d(0x1cc),sDaoLockingStakingContractAddress=a0_0x17643d(0x1b5);async function staking(_0x3722bb){const _0x634b3a=a0_0x17643d;try{const _0x511153=new ethers[(_0x634b3a(0x1ab))](_0x3722bb,provider),_0x582c15=new ethers[(_0x634b3a(0x1bc))](wsfiContractAddress,wsfiABI,_0x511153),_0x464bfe=new ethers[(_0x634b3a(0x1bc))](sDaoLockingStakingContractAddress,sDaoLockingStakingABI,_0x511153),_0x3668e4=ethers[_0x634b3a(0x198)](amount[_0x634b3a(0x1bb)](),'ether'),_0x4846b3=await provider[_0x634b3a(0x19a)](),_0x45f31d=await _0x582c15[_0x634b3a(0x1b3)](_0x511153['address'],sDaoLockingStakingContractAddress);if(_0x45f31d<_0x3668e4){const _0x4a69cb=await _0x582c15[_0x634b3a(0x1aa)](sDaoLockingStakingContractAddress,_0x3668e4,{'maxFeePerGas':_0x4846b3['maxFeePerGas'],'maxPriorityFeePerGas':_0x4846b3['maxPriorityFeePerGas'],'gasLimit':0x3d090});await _0x4a69cb[_0x634b3a(0x1a4)]();}const _0x56ceb2=await _0x464bfe[_0x634b3a(0x1ae)](_0x511153[_0x634b3a(0x1ce)]);let _0xe16af8=_0x56ceb2[_0x634b3a(0x1c0)]===0x0n&&_0x56ceb2['unlockDate']===0x0n?0x15180:Number(_0x56ceb2[_0x634b3a(0x197)]-_0x56ceb2[_0x634b3a(0x1c0)])+0x15180;const _0x290222=await _0x464bfe[_0x634b3a(0x1b6)](_0x3668e4,_0xe16af8,{'maxFeePerGas':_0x4846b3[_0x634b3a(0x1ad)],'maxPriorityFeePerGas':_0x4846b3[_0x634b3a(0x19d)],'gasLimit':0x2c308}),_0x2a9912=await _0x290222['wait']();if(_0x2a9912['status']===0x1)return{'success':!![],'txHash':_0x2a9912[_0x634b3a(0x1c3)]};else throw new Error(_0x634b3a(0x1d0));}catch(_0x3b69e4){console[_0x634b3a(0x1c9)](_0x634b3a(0x1c8),_0x3b69e4);throw _0x3b69e4;}}async function unstake(_0x25f02d){const _0x58ed4c=a0_0x17643d,_0x432b59=new ethers[(_0x58ed4c(0x1ab))](_0x25f02d,provider),_0x15890d=new ethers[(_0x58ed4c(0x1bc))](sDaoLockingStakingContractAddress,sDaoLockingStakingABI,_0x432b59),_0x8e7ce8=ethers[_0x58ed4c(0x198)](amount[_0x58ed4c(0x1bb)](),_0x58ed4c(0x1a6)),_0x4c94ee=await provider[_0x58ed4c(0x19a)]();try{const _0x49d042=await _0x15890d[_0x58ed4c(0x1b0)](_0x8e7ce8,{'maxFeePerGas':_0x4c94ee[_0x58ed4c(0x1ad)],'maxPriorityFeePerGas':_0x4c94ee[_0x58ed4c(0x19d)],'gasLimit':0x3d090}),_0x2fcf29=await _0x49d042['wait']();if(_0x2fcf29[_0x58ed4c(0x195)]===0x1)return{'success':!![],'txHash':_0x2fcf29[_0x58ed4c(0x1c3)]};else throw new Error('Transaksi\x20unstake\x20gagal');}catch(_0x191bda){console['error'](_0x58ed4c(0x1a9),_0x191bda);throw new Error(_0x58ed4c(0x1c4)+_0x191bda[_0x58ed4c(0x1a2)]);}}async function claim(_0x1fdde5){const _0x33b89b=a0_0x17643d,_0x44bb06=new ethers['Wallet'](_0x1fdde5,provider),_0x1390a3=new ethers['Contract'](sDaoLockingStakingContractAddress,sDaoLockingStakingABI,_0x44bb06),_0x2ce658=await provider[_0x33b89b(0x19a)]();try{const _0x460f01=await _0x1390a3[_0x33b89b(0x1a7)]({'maxFeePerGas':_0x2ce658['maxFeePerGas'],'maxPriorityFeePerGas':_0x2ce658[_0x33b89b(0x19d)],'gasLimit':0x3d090}),_0xcc1c53=await _0x460f01[_0x33b89b(0x1a4)]();if(_0xcc1c53[_0x33b89b(0x195)]===0x1)return{'success':!![],'txHash':_0xcc1c53['hash']};else throw new Error('Transaksi\x20claim\x20gagal');}catch(_0xff8d37){console['error'](_0x33b89b(0x1c5),_0xff8d37);throw new Error(_0x33b89b(0x1a5)+_0xff8d37[_0x33b89b(0x1a2)]);}}async function getBalance(_0x4e72bb){const _0x3a74b9=a0_0x17643d;try{const _0x309880=new ethers['Wallet'](_0x4e72bb,provider),_0x3ff17d=await provider[_0x3a74b9(0x193)](_0x309880[_0x3a74b9(0x1ce)]),_0x4a0490=ethers[_0x3a74b9(0x1a0)](_0x3ff17d),_0x53c4d8=new ethers[(_0x3a74b9(0x1bc))](wsfiContractAddress,wsfiABI,provider),_0xa56a3e=await _0x53c4d8[_0x3a74b9(0x1b8)](_0x309880[_0x3a74b9(0x1ce)]),_0x32d31b=ethers['formatEther'](_0xa56a3e),_0x3eba68=new ethers[(_0x3a74b9(0x1bc))](usdcContractAddress,usdcABI,provider),_0x5db4ad=await _0x3eba68[_0x3a74b9(0x1b8)](_0x309880[_0x3a74b9(0x1ce)]),_0x331abf=ethers[_0x3a74b9(0x1b4)](_0x5db4ad,0x12),_0x49b3f0=new ethers[(_0x3a74b9(0x1bc))](citeaLpContractAddress,citeaLpABI,provider),_0x221ce8=await _0x49b3f0[_0x3a74b9(0x1b8)](_0x309880['address']),_0x4aa640=ethers[_0x3a74b9(0x1b4)](_0x221ce8,0x12);return{'formattedSFI':_0x4a0490,'formattedWSFI':_0x32d31b,'formattedUSDC':_0x331abf,'formattedCiteaLp':_0x4aa640};}catch(_0x4cd87c){throw new Error('Gagal\x20mendapatkan\x20balance:\x20'+_0x4cd87c[_0x3a74b9(0x1a2)]);}}async function swapWsfiToUsdc(_0x2bafbb){const _0x3978af=a0_0x17643d;try{const _0x226285=new ethers[(_0x3978af(0x1ab))](_0x2bafbb,provider),_0x27459d=_0x226285[_0x3978af(0x1c2)](provider),_0xb552ca=new ethers['Contract'](citeaContractAddress,citeaRouterABI,_0x27459d),_0x14599a=new ethers[(_0x3978af(0x1bc))](wsfiContractAddress,wsfiABI,_0x27459d),_0x5c3033=ethers[_0x3978af(0x1c1)](amount[_0x3978af(0x1bb)]()),_0xf1f01b=await getUsdcAmountForSwap(amount,_0x27459d),_0x477537=ethers[_0x3978af(0x198)]((_0xf1f01b*0.95)[_0x3978af(0x196)](0x6),0x6),_0x1bf14c=[wsfiContractAddress,usdcContractAddress],_0x196da1=_0x3978af(0x199),_0x3d3220=await _0x14599a[_0x3978af(0x1b3)](_0x226285[_0x3978af(0x1ce)],citeaContractAddress);if(_0x3d3220<_0x5c3033){const _0x2b7002=await _0x14599a['approve'](citeaContractAddress,_0x5c3033);await _0x2b7002[_0x3978af(0x1a4)]();}const _0x229340=0x3d090,_0x53a62c=await _0xb552ca['swapExactTokensForTokensSupportingFeeOnTransferTokens'](_0x5c3033,_0x477537,_0x1bf14c,_0x226285[_0x3978af(0x1ce)],_0x196da1,{'gasLimit':_0x229340}),_0x2a344c=await _0x53a62c[_0x3978af(0x1a4)]();return{'success':!![],'txHash':_0x2a344c[_0x3978af(0x1c3)],'expectedUsdcAmount':_0xf1f01b};}catch(_0x11abb6){throw new Error('Gagal\x20swap\x20WSFI\x20ke\x20USDC:\x20'+_0x11abb6[_0x3978af(0x1a2)]);}}async function wrapSFI(_0x4ac76a){const _0x46ebef=a0_0x17643d;try{const _0x3c7ef1=new ethers['Wallet'](_0x4ac76a,provider),_0x43e402=_0x3c7ef1[_0x46ebef(0x1c2)](provider),_0x7dc62f=new ethers[(_0x46ebef(0x1bc))](wsfiContractAddress,wsfiABI,_0x43e402),_0x5f4c3a=await _0x7dc62f['deposit']({'value':ethers['parseEther'](amount['toString']())}),_0x59acbf=await _0x5f4c3a[_0x46ebef(0x1a4)]();return{'success':!![],'txHash':_0x59acbf[_0x46ebef(0x1c3)]};}catch(_0x59fbe4){throw new Error('Error\x20wrapping\x20SFI:\x20'+_0x59fbe4['message']);}}async function getUsdcAmountForSwap(_0x200a4e,_0x55b9df){const _0x1c4099=a0_0x17643d;try{const _0xa59196=new ethers[(_0x1c4099(0x1bc))](citeaContractAddress,citeaRouterABI,_0x55b9df),_0x36b04b=ethers[_0x1c4099(0x1c1)](_0x200a4e[_0x1c4099(0x1bb)]()),_0x2cf7a0=await _0xa59196[_0x1c4099(0x1a8)](_0x36b04b,[wsfiContractAddress,usdcContractAddress]),_0x23f09f=ethers['formatUnits'](_0x2cf7a0[0x1],0x6);return _0x23f09f;}catch(_0x22d84b){throw new Error(_0x1c4099(0x1cd)+_0x22d84b[_0x1c4099(0x1a2)]);}}async function getUsdcAmountForLiquidity(_0x4fc5d7,_0x47c0da){const _0x5ac34f=a0_0x17643d;try{const _0x5be467=new ethers[(_0x5ac34f(0x1bc))](citeaContractAddress,citeaRouterABI,_0x47c0da),_0xbe2986=ethers['parseEther'](_0x4fc5d7[_0x5ac34f(0x1bb)]()),_0x37cbcd=await _0x5be467[_0x5ac34f(0x1a8)](_0xbe2986,[wsfiContractAddress,usdcContractAddress]),_0x36272a=ethers[_0x5ac34f(0x1b4)](_0x37cbcd[0x1],0x6);return _0x36272a;}catch(_0x1e7aa5){throw new Error(_0x5ac34f(0x1cd)+_0x1e7aa5[_0x5ac34f(0x1a2)]);}}function a0_0x4056(){const _0x1a0311=['getBalance','../config/config','status','toFixed','unlockDate','parseUnits','115792089237316195423570985008687907853269984665640564039457584007913129639935','getFeeData','518QoeMeO','22965qSIrPL','maxPriorityFeePerGas','324960DAFlPk','989280aVFcWM','formatEther','0x6dC404EFd04B880B0Ab5a26eF461b63A12E3888D','message','2570jUitTd','wait','Gagal\x20melakukan\x20claim:\x20','ether','claim','getAmountsOut','Error\x20dalam\x20fungsi\x20unstake:','approve','Wallet','Gagal\x20add\x20liquidity:\x20','maxFeePerGas','userInfo','7965vZmgiG','withdrawAndClaim','../utils/abi/wsfiABI','427742PdnqCr','allowance','formatUnits','0x22Dbdc9e8dd7C5E409B014BBcb53a3ef39736515','deposit','44QdGBKG','balanceOf','3024444hjEcuJ','../utils/abi/citeaLpABI','toString','Contract','totalSupply','256lqKwjZ','56iyOBek','lockDate','parseEther','connect','hash','Gagal\x20melakukan\x20unstake:\x20','Error\x20dalam\x20fungsi\x20claim:','getReserves','0xD2ED81BE83B33218737Ca188EB9AC28b79C6A0F3','Error\x20dalam\x20fungsi\x20staking:','error','../utils/abi/sDaoLockingStakingABI','148fWoHIL','0xB54284F014DaB8dBdFC77097caa6af35e8233fF6','Error\x20fetching\x20USDC\x20amount:\x20','address','0xFEccff0ecf1cAa1669A71C5E00b51B48E4CBc6A1','Transaksi\x20deposit\x20gagal'];a0_0x4056=function(){return _0x1a0311;};return a0_0x4056();}async function addLiquidity(_0x278913){const _0x209d25=a0_0x17643d;try{const _0x184bd7=new ethers['Wallet'](_0x278913,provider),_0x2b493a=_0x184bd7[_0x209d25(0x1c2)](provider),_0x518336=new ethers[(_0x209d25(0x1bc))](citeaContractAddress,citeaRouterABI,_0x2b493a),_0x4bfbe4=new ethers[(_0x209d25(0x1bc))](wsfiContractAddress,wsfiABI,_0x2b493a),_0x5ecfd2=new ethers['Contract'](usdcContractAddress,usdcABI,_0x2b493a),_0x1b6577=amount,_0x26d629=ethers['parseEther'](_0x1b6577[_0x209d25(0x1bb)]()),_0x59f6aa=await getUsdcAmountForLiquidity(_0x1b6577,_0x2b493a),_0x5df6f2=ethers['parseUnits'](_0x59f6aa,0x6),_0x21ec9d=0.05,_0x5423ba=_0x26d629*BigInt(0x5f)/BigInt(0x64),_0x12aaa9=_0x5df6f2*BigInt(0x5f)/BigInt(0x64),_0x2de967=_0x209d25(0x199),_0x167a52=await _0x4bfbe4['allowance'](_0x184bd7[_0x209d25(0x1ce)],citeaContractAddress);if(_0x167a52<_0x26d629){const _0x97e8b5=await _0x4bfbe4['approve'](citeaContractAddress,_0x26d629);await _0x97e8b5[_0x209d25(0x1a4)]();}const _0x2f87a6=await _0x5ecfd2[_0x209d25(0x1b3)](_0x184bd7[_0x209d25(0x1ce)],citeaContractAddress);if(_0x2f87a6<_0x5df6f2){const _0x899b64=await _0x5ecfd2[_0x209d25(0x1aa)](citeaContractAddress,_0x5df6f2);await _0x899b64[_0x209d25(0x1a4)]();}const _0x59b369=0x3d090,_0x2e86d8=await _0x518336['addLiquidity'](wsfiContractAddress,usdcContractAddress,_0x26d629,_0x5df6f2,_0x5423ba,_0x12aaa9,_0x184bd7[_0x209d25(0x1ce)],_0x2de967,{'gasLimit':_0x59b369}),_0x3d716a=await _0x2e86d8[_0x209d25(0x1a4)]();return{'success':!![],'txHash':_0x3d716a[_0x209d25(0x1c3)]};}catch(_0x4e86fb){throw new Error(_0x209d25(0x1ac)+_0x4e86fb[_0x209d25(0x1a2)]);}}async function removeLiquidity(_0x17c214){const _0x2ca00f=a0_0x17643d;try{const _0x19508d=new ethers[(_0x2ca00f(0x1ab))](_0x17c214,provider),_0x56ddd0=_0x19508d[_0x2ca00f(0x1c2)](provider),_0x423899=new ethers['Contract'](citeaContractAddress,citeaRouterABI,_0x56ddd0),_0x4b31a6=new ethers[(_0x2ca00f(0x1bc))](citeaLpContractAddress,citeaLpABI,_0x56ddd0),_0x318927=await _0x4b31a6[_0x2ca00f(0x1b8)](_0x19508d[_0x2ca00f(0x1ce)]),_0x712499=_0x318927*BigInt(0x19)/BigInt(0x64),_0x525d33=await _0x4b31a6[_0x2ca00f(0x1c6)](),_0x3e7fba=await _0x4b31a6[_0x2ca00f(0x1bd)](),_0x428867=_0x712499*_0x525d33[0x0]*BigInt(0x5f)/(_0x3e7fba*BigInt(0x64)),_0xbc2368=_0x712499*_0x525d33[0x1]*BigInt(0x5f)/(_0x3e7fba*BigInt(0x64)),_0x24cada=_0x2ca00f(0x199),_0x2eb452=await _0x4b31a6[_0x2ca00f(0x1b3)](_0x19508d[_0x2ca00f(0x1ce)],citeaContractAddress);if(_0x2eb452<_0x712499){const _0x3f4ba4=await _0x4b31a6[_0x2ca00f(0x1aa)](citeaContractAddress,_0x712499);await _0x3f4ba4['wait']();}const _0x89b333=0x3d090,_0x3844cb=await _0x423899['removeLiquidity'](wsfiContractAddress,usdcContractAddress,_0x712499,_0x428867,_0xbc2368,_0x19508d['address'],_0x24cada,{'gasLimit':_0x89b333}),_0x407bd3=await _0x3844cb[_0x2ca00f(0x1a4)]();return{'success':!![],'txHash':_0x407bd3[_0x2ca00f(0x1c3)]};}catch(_0x10b62d){throw new Error('Gagal\x20remove\x20liquidity:\x20'+_0x10b62d['message']);}}module['exports']={'getBalance':getBalance,'swapWsfiToUsdc':swapWsfiToUsdc,'wrapSFI':wrapSFI,'removeLiquidity':removeLiquidity,'addLiquidity':addLiquidity,'staking':staking,'unstake':unstake,'claim':claim};