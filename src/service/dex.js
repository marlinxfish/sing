const a0_0x2027a2=a0_0x5b7a;(function(_0x453e69,_0x5f037e){const _0x1e9d46=a0_0x5b7a,_0x5e0eff=_0x453e69();while(!![]){try{const _0x48f7c1=-parseInt(_0x1e9d46(0x13b))/0x1*(parseInt(_0x1e9d46(0x138))/0x2)+parseInt(_0x1e9d46(0x120))/0x3*(parseInt(_0x1e9d46(0x102))/0x4)+-parseInt(_0x1e9d46(0x110))/0x5+parseInt(_0x1e9d46(0x100))/0x6*(-parseInt(_0x1e9d46(0x111))/0x7)+-parseInt(_0x1e9d46(0x11e))/0x8*(-parseInt(_0x1e9d46(0xfd))/0x9)+-parseInt(_0x1e9d46(0x114))/0xa*(-parseInt(_0x1e9d46(0x126))/0xb)+parseInt(_0x1e9d46(0x129))/0xc;if(_0x48f7c1===_0x5f037e)break;else _0x5e0eff['push'](_0x5e0eff['shift']());}catch(_0x84108e){_0x5e0eff['push'](_0x5e0eff['shift']());}}}(a0_0x5491,0x6d96b));const {Web3}=require('web3'),{amount}=require('../config/config'),citeaRouterABI=require(a0_0x2027a2(0x11c)),citeaLpABI=require(a0_0x2027a2(0x11a)),wsfiABI=require(a0_0x2027a2(0x13a)),usdcABI=require(a0_0x2027a2(0x134)),web3=new Web3('https://rpc-testnet.singularityfinance.ai'),wsfiContractAddress='0x6dC404EFd04B880B0Ab5a26eF461b63A12E3888D',usdcContractAddress=a0_0x2027a2(0x119),citeaContractAddress='0xFEccff0ecf1cAa1669A71C5E00b51B48E4CBc6A1',citeaLpContractAddress=a0_0x2027a2(0x108);function a0_0x5491(){const _0x231c49=['0x4592e36aff008d7556a1c21f129546e6986a03290e01b4db8c4786d7a42e46a0','Error\x20removing\x20liquidity:\x20','501245ebCwhT','49Qbkqon','signTransaction','rawTransaction','70LkzbMj','getTransactionCount','swapExactTokensForTokensSupportingFeeOnTransferTokens','Transaction\x20reverted\x20by\x20EVM','deposit','0xD2ED81BE83B33218737Ca188EB9AC28b79C6A0F3','../utils/abi/citeaLpABI','mwei','../utils/abi/citeaRouterABI','message','16536efsyMo','getBalance','3156MsvKLD','call','getAmountsOut','Error\x20adding\x20liquidity:\x20','fromWei','getGasPrice','102597BRaIcF','toWei','transactionHash','5539944dEkgWv','ether','approve','balanceOf','utils','status','add','toString','addLiquidity','Error\x20fetching\x20balance:\x20','Contract','../utils/abi/usdcABI','estimateGas','wallet','removeLiquidity','577910gVBPmz','floor','../utils/abi/wsfiABI','2fSeBLp','privateKeyToAccount','2628HLWSRr','encodeABI','now','759522eehGqy','eth','3356rFqlzk','pending','Error\x20wrapping\x20SFI:\x20','methods','115792089237316195423570985008687907853269984665640564039457584007913129639935','allowance','0xB54284F014DaB8dBdFC77097caa6af35e8233fF6','Error\x20fetching\x20USDC\x20amount:\x20','Error\x20swapping\x20WSFI\x20to\x20USDC:\x20','sendSignedTransaction','accounts','address'];a0_0x5491=function(){return _0x231c49;};return a0_0x5491();}async function getBalance(_0x306c24){const _0x3577c4=a0_0x2027a2;try{const _0x976bdf=web3[_0x3577c4(0x101)][_0x3577c4(0x10c)][_0x3577c4(0xfc)](_0x306c24),_0x1b333e=await web3[_0x3577c4(0x101)][_0x3577c4(0x11f)](_0x976bdf['address']),_0x212909=web3[_0x3577c4(0x12d)][_0x3577c4(0x124)](_0x1b333e,_0x3577c4(0x12a)),_0x2b0b8e=new web3[(_0x3577c4(0x101))]['Contract'](wsfiABI,wsfiContractAddress),_0x3cee4c=await _0x2b0b8e[_0x3577c4(0x105)][_0x3577c4(0x12c)](_0x976bdf[_0x3577c4(0x10d)])[_0x3577c4(0x121)](),_0x435f8f=web3[_0x3577c4(0x12d)][_0x3577c4(0x124)](_0x3cee4c,'ether'),_0xd507ed=new web3[(_0x3577c4(0x101))][(_0x3577c4(0x133))](usdcABI,usdcContractAddress),_0xbdea80=await _0xd507ed[_0x3577c4(0x105)][_0x3577c4(0x12c)](_0x976bdf['address'])['call'](),_0x542db3=web3[_0x3577c4(0x12d)]['fromWei'](_0xbdea80,_0x3577c4(0x11b)),_0x57e11e=new web3[(_0x3577c4(0x101))][(_0x3577c4(0x133))](citeaLpABI,citeaLpContractAddress),_0x8ec777=await _0x57e11e['methods']['balanceOf'](_0x976bdf[_0x3577c4(0x10d)])['call'](),_0x2b917b=web3['utils'][_0x3577c4(0x124)](_0x8ec777,_0x3577c4(0x11b));return{'formattedSFI':_0x212909,'formattedWSFI':_0x435f8f,'formattedUSDC':_0x542db3,'formattedCiteaLp':_0x2b917b};}catch(_0xce0616){throw new Error(_0x3577c4(0x132)+_0xce0616[_0x3577c4(0x11d)]);}}async function swapWsfiToUsdc(_0x9ec7e6){const _0x518df3=a0_0x2027a2;try{const _0x2b5acd=web3[_0x518df3(0x101)]['accounts']['privateKeyToAccount'](_0x9ec7e6);web3[_0x518df3(0x101)][_0x518df3(0x10c)][_0x518df3(0x136)][_0x518df3(0x12f)](_0x2b5acd);const _0x4904ff=new web3[(_0x518df3(0x101))][(_0x518df3(0x133))](citeaRouterABI,citeaContractAddress),_0x37cfb4=new web3[(_0x518df3(0x101))][(_0x518df3(0x133))](wsfiABI,wsfiContractAddress),_0x2e057c=await _0x37cfb4[_0x518df3(0x105)][_0x518df3(0x107)](_0x2b5acd['address'],citeaContractAddress)[_0x518df3(0x121)](),_0x10a270=web3[_0x518df3(0x12d)][_0x518df3(0x127)](amount[_0x518df3(0x130)](),_0x518df3(0x12a));if(parseFloat(_0x2e057c)<parseFloat(_0x10a270)){const _0x2582d8=_0x37cfb4[_0x518df3(0x105)][_0x518df3(0x12b)](citeaContractAddress,_0x10a270),_0x586d53=await _0x2582d8['estimateGas']({'from':_0x2b5acd[_0x518df3(0x10d)]}),_0x20da11=await web3[_0x518df3(0x101)][_0x518df3(0x125)](),_0x38a75d=await web3[_0x518df3(0x101)][_0x518df3(0x115)](_0x2b5acd[_0x518df3(0x10d)],_0x518df3(0x103)),_0x52c0ab={'from':_0x2b5acd[_0x518df3(0x10d)],'to':wsfiContractAddress,'gas':_0x586d53,'gasPrice':_0x20da11,'nonce':_0x38a75d,'data':_0x2582d8[_0x518df3(0xfe)]()},_0xa02247=await web3['eth']['accounts'][_0x518df3(0x112)](_0x52c0ab,_0x9ec7e6);await web3[_0x518df3(0x101)][_0x518df3(0x10b)](_0xa02247[_0x518df3(0x113)]);}const _0x38d721=[wsfiContractAddress,usdcContractAddress],_0x14901f=Math[_0x518df3(0x139)](Date[_0x518df3(0xff)]()/0x3e8)+0x3c*0x5,_0x4e405f=_0x4904ff[_0x518df3(0x105)][_0x518df3(0x116)](_0x10a270,0x0,_0x38d721,_0x2b5acd[_0x518df3(0x10d)],_0x14901f),_0x58c47e=await _0x4e405f['estimateGas']({'from':_0x2b5acd['address']}),_0x428506=await web3['eth'][_0x518df3(0x125)](),_0x251d54={'from':_0x2b5acd[_0x518df3(0x10d)],'to':citeaContractAddress,'gas':_0x58c47e,'gasPrice':_0x428506,'nonce':await web3[_0x518df3(0x101)]['getTransactionCount'](_0x2b5acd[_0x518df3(0x10d)],_0x518df3(0x103)),'data':_0x4e405f[_0x518df3(0xfe)]()},_0x14714d=await web3[_0x518df3(0x101)]['accounts'][_0x518df3(0x112)](_0x251d54,_0x9ec7e6),_0x1f2f98=await web3['eth'][_0x518df3(0x10b)](_0x14714d[_0x518df3(0x113)]);return{'success':!![],'txHash':_0x1f2f98[_0x518df3(0x128)]};}catch(_0x3bbd32){throw new Error(_0x518df3(0x10a)+_0x3bbd32[_0x518df3(0x11d)]);}}async function wrapSFI(_0x901e13){const _0x4c6718=a0_0x2027a2;try{const _0x5950d7=web3[_0x4c6718(0x101)][_0x4c6718(0x10c)][_0x4c6718(0xfc)](_0x901e13);web3[_0x4c6718(0x101)][_0x4c6718(0x10c)][_0x4c6718(0x136)]['add'](_0x5950d7);const _0x59cecd=new web3[(_0x4c6718(0x101))]['Contract'](wsfiABI,wsfiContractAddress),_0x1326fd=web3['utils'][_0x4c6718(0x127)](amount[_0x4c6718(0x130)](),'ether'),_0x2df9a4=_0x59cecd[_0x4c6718(0x105)][_0x4c6718(0x118)](),_0x4f09d4=await _0x2df9a4[_0x4c6718(0x135)]({'from':_0x5950d7['address'],'value':_0x1326fd}),_0x3f0ca2=await web3[_0x4c6718(0x101)]['getGasPrice'](),_0x12a904=await web3['eth'][_0x4c6718(0x115)](_0x5950d7['address'],'pending'),_0x1a11af={'from':_0x5950d7[_0x4c6718(0x10d)],'to':wsfiContractAddress,'value':_0x1326fd,'gas':_0x4f09d4,'gasPrice':_0x3f0ca2,'nonce':_0x12a904,'data':_0x2df9a4[_0x4c6718(0xfe)]()},_0x156961=await web3[_0x4c6718(0x101)][_0x4c6718(0x10c)][_0x4c6718(0x112)](_0x1a11af,_0x901e13),_0x368fb6=await web3[_0x4c6718(0x101)]['sendSignedTransaction'](_0x156961[_0x4c6718(0x113)]);return{'success':!![],'txHash':_0x368fb6[_0x4c6718(0x128)]};}catch(_0x154a50){throw new Error(_0x4c6718(0x104)+_0x154a50[_0x4c6718(0x11d)]);}}async function getUsdcAmountForLiquidity(_0x45d185){const _0x421ff1=a0_0x2027a2;try{const _0x5830e2=new web3['eth']['Contract'](citeaRouterABI,citeaContractAddress),_0x421ace=web3['utils'][_0x421ff1(0x127)](_0x45d185[_0x421ff1(0x130)](),'ether'),_0x13efce=await _0x5830e2[_0x421ff1(0x105)][_0x421ff1(0x122)](_0x421ace,[wsfiContractAddress,usdcContractAddress])[_0x421ff1(0x121)](),_0xec7068=web3[_0x421ff1(0x12d)][_0x421ff1(0x124)](_0x13efce[0x1],_0x421ff1(0x11b));return _0xec7068;}catch(_0x3e6a08){throw new Error(_0x421ff1(0x109)+_0x3e6a08['message']);}}async function addLiquidity(_0x343925){const _0x353f89=a0_0x2027a2;try{const _0x1c4a55=web3[_0x353f89(0x101)][_0x353f89(0x10c)][_0x353f89(0xfc)](_0x343925);web3['eth']['accounts'][_0x353f89(0x136)][_0x353f89(0x12f)](_0x1c4a55);const _0x1aae54=new web3[(_0x353f89(0x101))]['Contract'](citeaRouterABI,citeaContractAddress),_0xc48ff0=new web3[(_0x353f89(0x101))][(_0x353f89(0x133))](wsfiABI,wsfiContractAddress),_0x2c5db4=new web3['eth'][(_0x353f89(0x133))](usdcABI,usdcContractAddress),_0x1ee599=amount,_0x419d6a=web3[_0x353f89(0x12d)][_0x353f89(0x127)](_0x1ee599[_0x353f89(0x130)](),_0x353f89(0x12a)),_0x43b4e9=await getUsdcAmountForLiquidity(_0x1ee599),_0x30443f=web3[_0x353f89(0x12d)][_0x353f89(0x127)](_0x43b4e9[_0x353f89(0x130)](),_0x353f89(0x11b)),_0x1f7da5=0.05,_0x170388=Math[_0x353f89(0x139)](_0x419d6a*(0x1-_0x1f7da5)),_0x571d89=Math[_0x353f89(0x139)](_0x419d6a*(0x1-_0x1f7da5)),_0x5f48cb=_0x353f89(0x106),_0x33b61f=await _0xc48ff0['methods'][_0x353f89(0x107)](_0x1c4a55[_0x353f89(0x10d)],citeaContractAddress)[_0x353f89(0x121)]();if(BigInt(_0x33b61f)<BigInt(_0x419d6a)){const _0xabd248=_0xc48ff0[_0x353f89(0x105)][_0x353f89(0x12b)](citeaContractAddress,_0x419d6a),_0x5ddb05=await _0xabd248['estimateGas']({'from':_0x1c4a55[_0x353f89(0x10d)]}),_0x426488=await web3['eth'][_0x353f89(0x125)](),_0x1c9f86=await web3[_0x353f89(0x101)][_0x353f89(0x115)](_0x1c4a55[_0x353f89(0x10d)],_0x353f89(0x103)),_0x1da992={'from':_0x1c4a55['address'],'to':wsfiContractAddress,'gas':Number(_0x5ddb05),'gasPrice':Number(_0x426488),'nonce':_0x1c9f86,'data':_0xabd248[_0x353f89(0xfe)]()},_0x4e6cd9=await web3[_0x353f89(0x101)][_0x353f89(0x10c)][_0x353f89(0x112)](_0x1da992,_0x343925);await web3[_0x353f89(0x101)][_0x353f89(0x10b)](_0x4e6cd9[_0x353f89(0x113)]);}const _0x2f9fa7=await _0x2c5db4[_0x353f89(0x105)]['allowance'](_0x1c4a55[_0x353f89(0x10d)],citeaContractAddress)[_0x353f89(0x121)]();if(BigInt(_0x2f9fa7)<BigInt(_0x30443f)){const _0x386699=_0x2c5db4['methods']['approve'](citeaContractAddress,_0x30443f),_0x494d32=await _0x386699['estimateGas']({'from':_0x1c4a55['address']}),_0x115755=await web3[_0x353f89(0x101)][_0x353f89(0x125)](),_0x52f668=await web3[_0x353f89(0x101)][_0x353f89(0x115)](_0x1c4a55['address'],_0x353f89(0x103)),_0x163b96={'from':_0x1c4a55[_0x353f89(0x10d)],'to':usdcContractAddress,'gas':Number(_0x494d32),'gasPrice':Number(_0x115755),'nonce':_0x52f668,'data':_0x386699[_0x353f89(0xfe)]()},_0x48b1ca=await web3['eth'][_0x353f89(0x10c)][_0x353f89(0x112)](_0x163b96,_0x343925);await web3['eth'][_0x353f89(0x10b)](_0x48b1ca['rawTransaction']);}const _0x159183=_0x1aae54[_0x353f89(0x105)][_0x353f89(0x131)](wsfiContractAddress,usdcContractAddress,_0x419d6a,_0x30443f,_0x170388,_0x571d89,_0x1c4a55[_0x353f89(0x10d)],_0x5f48cb),_0x11ac9e=await _0x159183[_0x353f89(0x135)]({'from':_0x1c4a55[_0x353f89(0x10d)]}),_0x5dee16=await web3[_0x353f89(0x101)][_0x353f89(0x125)](),_0x93492f={'from':_0x1c4a55[_0x353f89(0x10d)],'to':citeaContractAddress,'gas':Number(_0x11ac9e),'gasPrice':Number(_0x5dee16),'nonce':await web3[_0x353f89(0x101)][_0x353f89(0x115)](_0x1c4a55[_0x353f89(0x10d)],_0x353f89(0x103)),'data':_0x159183['encodeABI']()},_0x5328bc=await web3[_0x353f89(0x101)][_0x353f89(0x10c)][_0x353f89(0x112)](_0x93492f,_0x343925),_0x58b988=await web3[_0x353f89(0x101)][_0x353f89(0x10b)](_0x5328bc[_0x353f89(0x113)]);if(!_0x58b988[_0x353f89(0x12e)])throw new Error(_0x353f89(0x117));return{'success':!![],'txHash':_0x58b988[_0x353f89(0x128)]};}catch(_0x309728){throw new Error(_0x353f89(0x123)+_0x309728['message']);}}async function removeLiquidity(_0x285c72){const _0x2a20b3=a0_0x2027a2;try{const _0x510863=web3['eth']['accounts'][_0x2a20b3(0xfc)](_0x285c72);web3[_0x2a20b3(0x101)][_0x2a20b3(0x10c)][_0x2a20b3(0x136)][_0x2a20b3(0x12f)](_0x510863);const _0x32610e=new web3['eth'][(_0x2a20b3(0x133))](citeaRouterABI,citeaContractAddress),_0x603b67=new web3[(_0x2a20b3(0x101))]['Contract'](citeaLpABI,citeaLpContractAddress),_0x34a67e=await _0x603b67[_0x2a20b3(0x105)][_0x2a20b3(0x12c)](_0x510863['address'])[_0x2a20b3(0x121)](),_0x5dc2ae=BigInt(_0x34a67e)*BigInt(0x5)/BigInt(0x64),_0x477a61='0',_0x2afcad='0',_0x417642=_0x2a20b3(0x106),_0x554934=await _0x603b67['methods'][_0x2a20b3(0x107)](_0x510863[_0x2a20b3(0x10d)],citeaContractAddress)[_0x2a20b3(0x121)]();if(BigInt(_0x554934)<_0x5dc2ae){const _0x15a76f=_0x603b67['methods'][_0x2a20b3(0x12b)](citeaContractAddress,_0x5dc2ae[_0x2a20b3(0x130)]()),_0xca3cc0=await _0x15a76f['estimateGas']({'from':_0x510863['address']}),_0x4debc5=await web3['eth'][_0x2a20b3(0x125)](),_0x5acbca=await web3[_0x2a20b3(0x101)][_0x2a20b3(0x115)](_0x510863[_0x2a20b3(0x10d)],_0x2a20b3(0x103)),_0x1c42dd={'from':_0x510863[_0x2a20b3(0x10d)],'to':citeaLpContractAddress,'gas':Number(_0xca3cc0),'gasPrice':Number(_0x4debc5),'nonce':_0x5acbca,'data':_0x15a76f[_0x2a20b3(0xfe)]()},_0x38f4b1=await web3[_0x2a20b3(0x101)]['accounts']['signTransaction'](_0x1c42dd,_0x285c72);await web3[_0x2a20b3(0x101)]['sendSignedTransaction'](_0x38f4b1[_0x2a20b3(0x113)]);}const _0x2b3488=_0x32610e['methods'][_0x2a20b3(0x137)](wsfiContractAddress,usdcContractAddress,_0x5dc2ae[_0x2a20b3(0x130)](),_0x477a61,_0x2afcad,_0x510863[_0x2a20b3(0x10d)],_0x417642),_0x238d0f=await _0x2b3488[_0x2a20b3(0x135)]({'from':_0x510863['address']}),_0x37c6b2=await web3[_0x2a20b3(0x101)]['getGasPrice'](),_0x5c1889={'from':_0x510863['address'],'to':citeaContractAddress,'gas':Number(_0x238d0f),'gasPrice':Number(_0x37c6b2),'nonce':await web3[_0x2a20b3(0x101)][_0x2a20b3(0x115)](_0x510863['address'],_0x2a20b3(0x103)),'data':_0x2b3488[_0x2a20b3(0xfe)]()},_0x4a289e=await web3[_0x2a20b3(0x101)][_0x2a20b3(0x10c)][_0x2a20b3(0x112)](_0x5c1889,_0x285c72),_0x58572e=await web3[_0x2a20b3(0x101)]['sendSignedTransaction'](_0x4a289e[_0x2a20b3(0x113)]);if(!_0x58572e[_0x2a20b3(0x12e)])throw new Error(_0x2a20b3(0x117));return{'success':!![],'txHash':_0x58572e['transactionHash']};}catch(_0xc246b0){throw new Error(_0x2a20b3(0x10f)+_0xc246b0[_0x2a20b3(0x11d)]);}}function a0_0x5b7a(_0x34d378,_0x5104f1){const _0x54911f=a0_0x5491();return a0_0x5b7a=function(_0x5b7a95,_0x1074a3){_0x5b7a95=_0x5b7a95-0xfc;let _0x3e5af2=_0x54911f[_0x5b7a95];return _0x3e5af2;},a0_0x5b7a(_0x34d378,_0x5104f1);}removeLiquidity(a0_0x2027a2(0x10e)),module['exports']={'getBalance':getBalance,'swapWsfiToUsdc':swapWsfiToUsdc,'wrapSFI':wrapSFI,'removeLiquidity':removeLiquidity,'addLiquidity':addLiquidity};